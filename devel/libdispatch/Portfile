# -*- coding: utf-8; mode: tcl; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 4; truncate-lines: t -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4

PortSystem      1.0
PortGroup       cmake 1.1
PortGroup       github 1.0
PortGroup       LTO 1.0
PortGroup       devport 1.0

github.setup    apple swift-corelibs-libdispatch 5.5 release/
revision        1
name            libdispatch
checksums       rmd160  3f4d04c313d49ed42c69335e9c790fb7a46baf36 \
                sha256  c64af05e33e7285ff65eae680be316221fae2340d16ebe9dd28b076128b62425
#                 size    592527

conflicts       libdispatch-devel

categories      sysutils
platforms       linux
license         Apache-2
maintainers     gmail.com:rjvbertin openmaintainer
description     Obsolete libdispatch Project, (a.k.a. Grand Central Dispatch), for concurrency on multicore hardware
long_description \
                Grand Central Dispatch (GCD or libdispatch) provides comprehensive support \
                for concurrent code execution on multicore hardware. Obsolete.

####################

    create_devport port:${name}

    if {${subport} eq "${name}-dev"} {
        conflicts-append \
                libdispatch-devel-dev \
                gnustep-libobjc2-dev
        # we don't care about anything that follows,
        # return here to avoid having to add more subport checks.
        return
    }
####################

configure.args-append \
                -DCMAKE_STRIP:PATH=/bin/echo

cmake.save_configure_cmd "install log"

post-destroot {
    if {[info procs create_devport_content_archive] ne ""} {
        register_devport_standard_content
        create_devport_content_archive
    }
}

test.run		yes

