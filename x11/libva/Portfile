# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           LTO 1.0
PortGroup           save_configure_cmd 1.0

github.setup        intel libva 29fbbd8a913b2529cef8e63548093aa25c2669b8
version             2.22.99.1
set real_version    2.23.0.pre1

checksums           rmd160  51ba398dd97ee86dfc279197e7f7f78f326d6837 \
                    sha256  710037a069ff970263562eb510ae3c17523f045504af3479ac192b4a356eac32
#                     size    302737

categories          x11 multimedia
platforms           linux
maintainers         gmail.com:rjvbertin
license             Permissive

description         an implementation for VA-API (Video Acceleration API)
long_description \
    VA-API is an open-source library and API specification, which provides \
    access to graphics hardware acceleration capabilities for video processing. \
    It consists of a main library and driver-specific acceleration backends for \
    each supported hardware vendor.\n\
    This is libva ${real_version}

use_autoreconf  yes
pre-configure {
    if {[file exists ${worksrcpath}/configure] && [file exists ${worksrcpath}/config.log]} {
        use_autoreconf no
    }
}

# autoreconf needs pkgconfig
depends_build-append \
                port:pkgconfig

depends_lib-append \
                port:libdrm \
                port:mesa \
                port:wayland \
                port:xorg-libX11 \
                port:xorg-libXext

configure.save_configure_cmd "install log"

test.run        yes
test.target     check
